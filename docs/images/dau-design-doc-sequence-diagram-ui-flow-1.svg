<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="630px" preserveAspectRatio="none" style="width:673px;height:630px;" version="1.1" viewBox="0 0 673 630" width="673px" zoomAndPan="magnify"><defs><filter height="300%" id="fpczmcc9y0hmt" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fpczmcc9y0hmt)" height="416.2031" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="198.5" y="119.4297"/><rect fill="#FFFFFF" filter="url(#fpczmcc9y0hmt)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="507.5" y="148.5625"/><rect fill="#FFFFFF" filter="url(#fpczmcc9y0hmt)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="507.5" y="230.9609"/><rect fill="#FFFFFF" filter="url(#fpczmcc9y0hmt)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="507.5" y="386.4297"/><rect fill="#FFFFFF" filter="url(#fpczmcc9y0hmt)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="507.5" y="491.5"/><rect fill="#FFFFFF" filter="url(#fpczmcc9y0hmt)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="599" y="313.3594"/><rect fill="#FFFFFF" filter="url(#fpczmcc9y0hmt)" height="335.9375" style="stroke: #000000; stroke-width: 2.0;" width="528" x="131.5" y="192.6953"/><rect fill="#FFFFFF" filter="url(#fpczmcc9y0hmt)" height="148.4688" style="stroke: #000000; stroke-width: 2.0;" width="508" x="141.5" y="275.0938"/><rect fill="#FFFFFF" height="73.0703" style="stroke: none; stroke-width: 1.0;" width="508" x="141.5" y="350.4922"/><rect fill="#FFFFFF" height="73.0703" style="stroke: none; stroke-width: 1.0;" width="528" x="131.5" y="455.5625"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="23" x2="23" y1="88.2969" y2="545.6328"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="203.5" x2="203.5" y1="88.2969" y2="545.6328"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="512.5" x2="512.5" y1="88.2969" y2="545.6328"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="603.5" x2="603.5" y1="88.2969" y2="545.6328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="5" y="84.9951">User</text><ellipse cx="23.5" cy="15" fill="#FEFECE" filter="url(#fpczmcc9y0hmt)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M23.5,23 L23.5,50 M10.5,31 L36.5,31 M23.5,50 L10.5,65 M23.5,50 L36.5,65 " fill="none" filter="url(#fpczmcc9y0hmt)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="5" y="557.6279">User</text><ellipse cx="23.5" cy="570.9297" fill="#FEFECE" filter="url(#fpczmcc9y0hmt)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M23.5,578.9297 L23.5,605.9297 M10.5,586.9297 L36.5,586.9297 M23.5,605.9297 L10.5,620.9297 M23.5,605.9297 L36.5,620.9297 " fill="none" filter="url(#fpczmcc9y0hmt)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#fpczmcc9y0hmt)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="151.5" y="36.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="77" x="163" y="56.6982">Client App</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="158.5" y="72.9951">(Browser/JS)</text><rect fill="#FEFECE" filter="url(#fpczmcc9y0hmt)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="151.5" y="544.6328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="77" x="163" y="564.6279">Client App</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="158.5" y="580.9248">(Browser/JS)</text><rect fill="#FEFECE" filter="url(#fpczmcc9y0hmt)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="88" x="466.5" y="36.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="496" y="56.6982">ACS</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="473.5" y="72.9951">(REST API)</text><rect fill="#FEFECE" filter="url(#fpczmcc9y0hmt)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="88" x="466.5" y="544.6328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="496" y="564.6279">ACS</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="473.5" y="580.9248">(REST API)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="40" x="581" y="68.6982">Cloud</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="65" x="568.5" y="84.9951">(AWS S3)</text><path d="M586,19.7031 C586,9.7031 604,9.7031 604,9.7031 C604,9.7031 622,9.7031 622,19.7031 L622,45.7031 C622,55.7031 604,55.7031 604,55.7031 C604,55.7031 586,55.7031 586,45.7031 L586,19.7031 " fill="#FEFECE" filter="url(#fpczmcc9y0hmt)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M586,19.7031 C586,29.7031 604,29.7031 604,29.7031 C604,29.7031 622,29.7031 622,19.7031 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="40" x="581" y="557.6279">Cloud</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="65" x="568.5" y="573.9248">(AWS S3)</text><path d="M586,587.2266 C586,577.2266 604,577.2266 604,577.2266 C604,577.2266 622,577.2266 622,587.2266 L622,613.2266 C622,623.2266 604,623.2266 604,623.2266 C604,623.2266 586,623.2266 586,613.2266 L586,587.2266 " fill="#FEFECE" filter="url(#fpczmcc9y0hmt)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M586,587.2266 C586,597.2266 604,597.2266 604,597.2266 C604,597.2266 622,597.2266 622,587.2266 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#fpczmcc9y0hmt)" height="416.2031" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="198.5" y="119.4297"/><rect fill="#FFFFFF" filter="url(#fpczmcc9y0hmt)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="507.5" y="148.5625"/><rect fill="#FFFFFF" filter="url(#fpczmcc9y0hmt)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="507.5" y="230.9609"/><rect fill="#FFFFFF" filter="url(#fpczmcc9y0hmt)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="507.5" y="386.4297"/><rect fill="#FFFFFF" filter="url(#fpczmcc9y0hmt)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="507.5" y="491.5"/><rect fill="#FFFFFF" filter="url(#fpczmcc9y0hmt)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="599" y="313.3594"/><polygon fill="#A80036" points="186.5,115.4297,196.5,119.4297,186.5,123.4297,190.5,119.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="23.5" x2="192.5" y1="119.4297" y2="119.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="30.5" y="114.3638">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="43.5" y="114.3638">Download file (Button)</text><polygon fill="#A80036" points="495.5,144.5625,505.5,148.5625,495.5,152.5625,499.5,148.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="208.5" x2="501.5" y1="148.5625" y2="148.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="215.5" y="143.4966">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="267" x="228.5" y="143.4966">Is DAU Available&amp;Enabled (Discovery API)</text><polygon fill="#A80036" points="219.5,173.6953,209.5,177.6953,219.5,181.6953,215.5,177.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="213.5" x2="511.5" y1="177.6953" y2="177.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="8" x="225.5" y="172.6294">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="237.5" y="172.6294">Yes / No</text><path d="M131.5,192.6953 L197.5,192.6953 L197.5,199.6953 L187.5,209.6953 L131.5,209.6953 L131.5,192.6953 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="335.9375" style="stroke: #000000; stroke-width: 2.0;" width="528" x="131.5" y="192.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="146.5" y="205.7622">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="177" x="212.5" y="204.9058">[If DAU Available&amp;Enabled]</text><polygon fill="#A80036" points="495.5,226.9609,505.5,230.9609,495.5,234.9609,499.5,230.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="208.5" x2="501.5" y1="230.9609" y2="230.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="215.5" y="225.895">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="228.5" y="225.895">Request a Direct URL</text><polygon fill="#A80036" points="219.5,256.0938,209.5,260.0938,219.5,264.0938,215.5,260.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="213.5" x2="511.5" y1="260.0938" y2="260.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="225.5" y="255.0278">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="82" x="238.5" y="255.0278">DAU / Failure</text><path d="M141.5,275.0938 L207.5,275.0938 L207.5,282.0938 L197.5,292.0938 L141.5,292.0938 L141.5,275.0938 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="148.4688" style="stroke: #000000; stroke-width: 2.0;" width="508" x="141.5" y="275.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="156.5" y="288.1606">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="112" x="222.5" y="287.3042">[If DAU received]</text><polygon fill="#A80036" points="587,309.3594,597,313.3594,587,317.3594,591,313.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="208.5" x2="593" y1="313.3594" y2="313.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="215.5" y="308.2935">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="240" x="228.5" y="308.2935">Initiate download from the Direct URL</text><polygon fill="#A80036" points="219.5,338.4922,209.5,342.4922,219.5,346.4922,215.5,342.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="213.5" x2="603" y1="342.4922" y2="342.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="225.5" y="337.4263">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="71" x="238.5" y="337.4263">File stream</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="141.5" x2="649.5" y1="351.4922" y2="351.4922"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="136" x="146.5" y="361.7026">[DAU request failed]</text><polygon fill="#A80036" points="495.5,382.4297,505.5,386.4297,495.5,390.4297,499.5,386.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="208.5" x2="501.5" y1="386.4297" y2="386.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="215.5" y="381.3638">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="228.5" y="381.3638">Initiate download from ACS</text><polygon fill="#A80036" points="219.5,411.5625,209.5,415.5625,219.5,419.5625,215.5,415.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="213.5" x2="511.5" y1="415.5625" y2="415.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="225.5" y="410.4966">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="71" x="238.5" y="410.4966">File stream</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="131.5" x2="659.5" y1="456.5625" y2="456.5625"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="192" x="136.5" y="466.7729">[If DAU Disabled/Unavailable]</text><polygon fill="#A80036" points="495.5,487.5,505.5,491.5,495.5,495.5,499.5,491.5" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="208.5" x2="501.5" y1="491.5" y2="491.5"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="215.5" y="486.4341">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="228.5" y="486.4341">Initiate download from ACS</text><polygon fill="#A80036" points="219.5,516.6328,209.5,520.6328,219.5,524.6328,215.5,520.6328" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="213.5" x2="511.5" y1="520.6328" y2="520.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="225.5" y="515.5669">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="71" x="238.5" y="515.5669">File stream</text><!--MD5=[3d1e23866d80e193ccd0f048e6cc92c3]
@startuml
actor User
participant "Client App\n(Browser/JS)" as App
participant "ACS\n(REST API)" as ACS
database "Cloud\n(AWS S3)" as Cloud


autonumber
User -> App ++ : Download file (Button)

App -> ACS ++: Is DAU Available&Enabled (Discovery API)
return Yes / No

alt If DAU Available&Enabled
    App - -> ACS ++ : Request a Direct URL
    return DAU / Failure

    alt If DAU received
        App -> Cloud ++ : Initiate download from the Direct URL
        return File stream
    else DAU request failed
        autonumber 6
        App -> ACS ++ : Initiate download from ACS
        return File stream
    end
|||
else If DAU Disabled/Unavailable
    autonumber 4
    App -> ACS ++ : Initiate download from ACS
    return File stream
end

deactivate App
@enduml

PlantUML version 1.2020.20beta13(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>