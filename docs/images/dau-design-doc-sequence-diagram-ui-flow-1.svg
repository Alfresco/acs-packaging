<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1059px" preserveAspectRatio="none" style="width:720px;height:1059px;" version="1.1" viewBox="0 0 720 1059" width="720px" zoomAndPan="magnify"><defs><filter height="300%" id="f1r9ig0vp05638" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1r9ig0vp05638)" height="100.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="213.5" y="119.4297"/><rect fill="#FFFFFF" filter="url(#f1r9ig0vp05638)" height="58.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="213.5" y="273.0938"/><rect fill="#FFFFFF" filter="url(#f1r9ig0vp05638)" height="548.3359" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="213.5" y="416.625"/><rect fill="#FFFFFF" filter="url(#f1r9ig0vp05638)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="453.5" y="190.6953"/><rect fill="#FFFFFF" filter="url(#f1r9ig0vp05638)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="453.5" y="302.2266"/><rect fill="#FFFFFF" filter="url(#f1r9ig0vp05638)" height="41.6992" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="453.5" y="458.3242"/><rect fill="#FFFFFF" filter="url(#f1r9ig0vp05638)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="453.5" y="553.2891"/><rect fill="#FFFFFF" filter="url(#f1r9ig0vp05638)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="453.5" y="758.7578"/><rect fill="#FFFFFF" filter="url(#f1r9ig0vp05638)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="453.5" y="888.8281"/><rect fill="#FFFFFF" filter="url(#f1r9ig0vp05638)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="545" y="635.6875"/><rect fill="#FFFFFF" filter="url(#f1r9ig0vp05638)" height="104.5313" style="stroke: #000000; stroke-width: 2.0;" width="504.5" x="10" y="234.8281"/><rect fill="#FFFFFF" filter="url(#f1r9ig0vp05638)" height="554.6016" style="stroke: #000000; stroke-width: 2.0;" width="696.5" x="10" y="378.3594"/><rect fill="#FFFFFF" filter="url(#f1r9ig0vp05638)" height="410.9375" style="stroke: #000000; stroke-width: 2.0;" width="459" x="146.5" y="515.0234"/><rect fill="#FFFFFF" filter="url(#f1r9ig0vp05638)" height="198.4688" style="stroke: #000000; stroke-width: 2.0;" width="439" x="156.5" y="597.4219"/><rect fill="#FFFFFF" height="98.0703" style="stroke: none; stroke-width: 1.0;" width="439" x="156.5" y="697.8203"/><rect fill="#FFFFFF" height="98.0703" style="stroke: none; stroke-width: 1.0;" width="459" x="146.5" y="827.8906"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="38" x2="38" y1="88.2969" y2="974.9609"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="218.5" x2="218.5" y1="88.2969" y2="974.9609"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="458.5" x2="458.5" y1="88.2969" y2="974.9609"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="549.5" x2="549.5" y1="88.2969" y2="974.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="20" y="84.9951">User</text><ellipse cx="38.5" cy="15" fill="#FEFECE" filter="url(#f1r9ig0vp05638)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M38.5,23 L38.5,50 M25.5,31 L51.5,31 M38.5,50 L25.5,65 M38.5,50 L51.5,65 " fill="none" filter="url(#f1r9ig0vp05638)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="20" y="986.9561">User</text><ellipse cx="38.5" cy="1000.2578" fill="#FEFECE" filter="url(#f1r9ig0vp05638)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M38.5,1008.2578 L38.5,1035.2578 M25.5,1016.2578 L51.5,1016.2578 M38.5,1035.2578 L25.5,1050.2578 M38.5,1035.2578 L51.5,1050.2578 " fill="none" filter="url(#f1r9ig0vp05638)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f1r9ig0vp05638)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="166.5" y="36.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="77" x="178" y="56.6982">Client App</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="173.5" y="72.9951">(Browser/JS)</text><rect fill="#FEFECE" filter="url(#f1r9ig0vp05638)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="166.5" y="973.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="77" x="178" y="993.9561">Client App</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="173.5" y="1010.2529">(Browser/JS)</text><rect fill="#FEFECE" filter="url(#f1r9ig0vp05638)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="88" x="412.5" y="36.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="442" y="56.6982">ACS</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="419.5" y="72.9951">(REST API)</text><rect fill="#FEFECE" filter="url(#f1r9ig0vp05638)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="88" x="412.5" y="973.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="442" y="993.9561">ACS</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="419.5" y="1010.2529">(REST API)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="40" x="527" y="68.6982">Cloud</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="65" x="514.5" y="84.9951">(AWS S3)</text><path d="M532,19.7031 C532,9.7031 550,9.7031 550,9.7031 C550,9.7031 568,9.7031 568,19.7031 L568,45.7031 C568,55.7031 550,55.7031 550,55.7031 C550,55.7031 532,55.7031 532,45.7031 L532,19.7031 " fill="#FEFECE" filter="url(#f1r9ig0vp05638)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M532,19.7031 C532,29.7031 550,29.7031 550,29.7031 C550,29.7031 568,29.7031 568,19.7031 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="40" x="527" y="986.9561">Cloud</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="65" x="514.5" y="1003.2529">(AWS S3)</text><path d="M532,1016.5547 C532,1006.5547 550,1006.5547 550,1006.5547 C550,1006.5547 568,1006.5547 568,1016.5547 L568,1042.5547 C568,1052.5547 550,1052.5547 550,1052.5547 C550,1052.5547 532,1052.5547 532,1042.5547 L532,1016.5547 " fill="#FEFECE" filter="url(#f1r9ig0vp05638)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M532,1016.5547 C532,1026.5547 550,1026.5547 550,1026.5547 C550,1026.5547 568,1026.5547 568,1016.5547 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#f1r9ig0vp05638)" height="100.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="213.5" y="119.4297"/><rect fill="#FFFFFF" filter="url(#f1r9ig0vp05638)" height="58.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="213.5" y="273.0938"/><rect fill="#FFFFFF" filter="url(#f1r9ig0vp05638)" height="548.3359" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="213.5" y="416.625"/><rect fill="#FFFFFF" filter="url(#f1r9ig0vp05638)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="453.5" y="190.6953"/><rect fill="#FFFFFF" filter="url(#f1r9ig0vp05638)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="453.5" y="302.2266"/><rect fill="#FFFFFF" filter="url(#f1r9ig0vp05638)" height="41.6992" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="453.5" y="458.3242"/><rect fill="#FFFFFF" filter="url(#f1r9ig0vp05638)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="453.5" y="553.2891"/><rect fill="#FFFFFF" filter="url(#f1r9ig0vp05638)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="453.5" y="758.7578"/><rect fill="#FFFFFF" filter="url(#f1r9ig0vp05638)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="453.5" y="888.8281"/><rect fill="#FFFFFF" filter="url(#f1r9ig0vp05638)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="545" y="635.6875"/><polygon fill="#A80036" points="201.5,115.4297,211.5,119.4297,201.5,123.4297,205.5,119.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="38.5" x2="207.5" y1="119.4297" y2="119.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="45.5" y="114.3638">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="58.5" y="114.3638">Load app in browser</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="223.5" x2="265.5" y1="148.5625" y2="148.5625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="265.5" x2="265.5" y1="148.5625" y2="161.5625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="224.5" x2="265.5" y1="161.5625" y2="161.5625"/><polygon fill="#A80036" points="234.5,157.5625,224.5,161.5625,234.5,165.5625,230.5,161.5625" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="230.5" y="143.4966">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="19" x="243.5" y="143.4966">init</text><polygon fill="#A80036" points="441.5,186.6953,451.5,190.6953,441.5,194.6953,445.5,190.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="223.5" x2="447.5" y1="190.6953" y2="190.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="8" x="230.5" y="185.6294">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="199" x="242.5" y="185.6294">Is DAU Enabled (Discovery API)</text><polygon fill="#A80036" points="229.5,215.8281,219.5,219.8281,229.5,223.8281,225.5,219.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="223.5" x2="457.5" y1="219.8281" y2="219.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="235.5" y="214.7622">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="248.5" y="214.7622">Yes / No</text><path d="M10,234.8281 L76,234.8281 L76,241.8281 L66,251.8281 L10,251.8281 L10,234.8281 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="104.5313" style="stroke: #000000; stroke-width: 2.0;" width="504.5" x="10" y="234.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="25" y="247.895">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="333" x="91" y="247.0386">[If DAU Disabled (system-wide &amp; on the REST API)]</text><polygon fill="#A80036" points="201.5,269.0938,211.5,273.0938,201.5,277.0938,205.5,273.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="38.5" x2="207.5" y1="273.0938" y2="273.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="45.5" y="268.0278">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="58.5" y="268.0278">Download file (Button)</text><polygon fill="#A80036" points="441.5,298.2266,451.5,302.2266,441.5,306.2266,445.5,302.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="223.5" x2="447.5" y1="302.2266" y2="302.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="230.5" y="297.1606">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="243.5" y="297.1606">Initiate download from ACS</text><polygon fill="#A80036" points="229.5,327.3594,219.5,331.3594,229.5,335.3594,225.5,331.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="223.5" x2="457.5" y1="331.3594" y2="331.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="8" x="235.5" y="326.2935">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="71" x="247.5" y="326.2935">File stream</text><path d="M10,378.3594 L76,378.3594 L76,385.3594 L66,395.3594 L10,395.3594 L10,378.3594 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="554.6016" style="stroke: #000000; stroke-width: 2.0;" width="696.5" x="10" y="378.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="25" y="391.4263">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="328" x="91" y="390.5698">[If DAU Enabled (system-wide &amp; on the REST API)]</text><polygon fill="#A80036" points="201.5,412.625,211.5,416.625,201.5,420.625,205.5,416.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="38.5" x2="207.5" y1="416.625" y2="416.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="45.5" y="411.5591">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="58.5" y="411.5591">Download file (Button)</text><polygon fill="#A80036" points="441.5,454.3242,451.5,458.3242,441.5,462.3242,445.5,458.3242" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="223.5" x2="447.5" y1="458.3242" y2="458.3242"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="230.5" y="453.2583">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="243.5" y="453.2583">Is Direct Link enabled on node</text><path d="M468,429.625 L468,469.625 L697,469.625 L697,439.625 L687,429.625 L468,429.625 " fill="#FBFB77" filter="url(#f1r9ig0vp05638)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M687,429.625 L687,439.625 L697,439.625 L687,429.625 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="474" y="446.6919">GET {nodeId} info with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="474" y="461.8247">isDirectLinkEnabled includes flag</text><polygon fill="#A80036" points="234.5,496.0234,224.5,500.0234,234.5,504.0234,230.5,500.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="228.5" x2="457.5" y1="500.0234" y2="500.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="8" x="240.5" y="494.9575">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="252.5" y="494.9575">Yes / No</text><path d="M146.5,515.0234 L212.5,515.0234 L212.5,522.0234 L202.5,532.0234 L146.5,532.0234 L146.5,515.0234 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="410.9375" style="stroke: #000000; stroke-width: 2.0;" width="459" x="146.5" y="515.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="161.5" y="528.0903">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="150" x="227.5" y="527.2339">[DAU Enabled on node]</text><polygon fill="#A80036" points="441.5,549.2891,451.5,553.2891,441.5,557.2891,445.5,553.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="223.5" x2="447.5" y1="553.2891" y2="553.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="230.5" y="548.2231">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="243.5" y="548.2231">Request a Direct URL</text><polygon fill="#A80036" points="234.5,578.4219,224.5,582.4219,234.5,586.4219,230.5,582.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="228.5" x2="457.5" y1="582.4219" y2="582.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="240.5" y="577.356">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="82" x="253.5" y="577.356">DAU / Failure</text><path d="M156.5,597.4219 L222.5,597.4219 L222.5,604.4219 L212.5,614.4219 L156.5,614.4219 L156.5,597.4219 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="198.4688" style="stroke: #000000; stroke-width: 2.0;" width="439" x="156.5" y="597.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="171.5" y="610.4888">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="112" x="237.5" y="609.6323">[If DAU received]</text><polygon fill="#A80036" points="533,631.6875,543,635.6875,533,639.6875,537,635.6875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="223.5" x2="539" y1="635.6875" y2="635.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="230.5" y="630.6216">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="240" x="243.5" y="630.6216">Initiate download from the Direct URL</text><polygon fill="#A80036" points="234.5,660.8203,224.5,664.8203,234.5,668.8203,230.5,664.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="228.5" x2="549" y1="664.8203" y2="664.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="240.5" y="659.7544">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="71" x="253.5" y="659.7544">File stream</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="156.5" x2="595.5" y1="698.8203" y2="698.8203"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="136" x="161.5" y="709.0308">[DAU request failed]</text><polygon fill="#A80036" points="441.5,754.7578,451.5,758.7578,441.5,762.7578,445.5,758.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="223.5" x2="447.5" y1="758.7578" y2="758.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="230.5" y="753.6919">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="243.5" y="753.6919">Initiate download from ACS</text><polygon fill="#A80036" points="234.5,783.8906,224.5,787.8906,234.5,791.8906,230.5,787.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="228.5" x2="457.5" y1="787.8906" y2="787.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="240.5" y="782.8247">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="71" x="253.5" y="782.8247">File stream</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="146.5" x2="605.5" y1="828.8906" y2="828.8906"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="155" x="151.5" y="839.1011">[DAU Disabled on node]</text><polygon fill="#A80036" points="441.5,884.8281,451.5,888.8281,441.5,892.8281,445.5,888.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="223.5" x2="447.5" y1="888.8281" y2="888.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="230.5" y="883.7622">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="243.5" y="883.7622">Initiate download from ACS</text><polygon fill="#A80036" points="234.5,913.9609,224.5,917.9609,234.5,921.9609,230.5,917.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="228.5" x2="457.5" y1="917.9609" y2="917.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="240.5" y="912.895">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="71" x="253.5" y="912.895">File stream</text><!--MD5=[d19aff2d334595ae6c1ade8e53572dce]
@startuml
actor User
participant "Client App\n(Browser/JS)" as App
participant "ACS\n(REST API)" as ACS
database "Cloud\n(AWS S3)" as Cloud


autonumber

User -> App ++ : Load app in browser
App -> App : init
App -> ACS ++: Is DAU Enabled (Discovery API)
return Yes / No
deactivate App



alt If DAU Disabled (system-wide & on the REST API)
    autonumber
    User -> App ++ : Download file (Button)
    App -> ACS ++ : Initiate download from ACS
    return File stream
    deactivate App
end
|||

alt If DAU Enabled (system-wide & on the REST API)
    autonumber
    User -> App ++ : Download file (Button)
    
    App -> ACS ++ : Is Direct Link enabled on node
    note right: GET {nodeId} info with\nisDirectLinkEnabled includes flag
    return Yes / No
    

    alt DAU Enabled on node
        App - -> ACS ++ : Request a Direct URL
        return DAU / Failure

        alt If DAU received
            App -> Cloud ++ : Initiate download from the Direct URL
            return File stream
            |||
        else DAU request failed
            |||
            autonumber 6
            App -> ACS ++ : Initiate download from ACS
            return File stream
        end
        |||
    else DAU Disabled on node
        |||
        autonumber 4
        App -> ACS ++ : Initiate download from ACS
        return File stream
    end
end

|||
deactivate App
@enduml

PlantUML version 1.2020.20beta13(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>